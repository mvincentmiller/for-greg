{"version":3,"sources":["styles/AccountInfo.module.scss","components/Account/EditCard.js"],"names":["module","exports","CardForm","injectStripe","props","store","useContext","AccountStore","handleChange","event","set","target","id","value","onSubmit","preventDefault","stripe","createToken","then","payload","updatePaymentBilling","toJS","renderCardForm","console","log","className","poochInput","type","placeholder","onChange","stripeElementsInput","fontSize","style","base","color","backgroundColor","fontWeight","letterSpacing","fontFamily","invalid","Link","onClick","href","textAlign","EditCard","observer","apiKey","REACT_APP_STRIPE_KEY","fonts","cssSrc","customer","billingInfo","name","cardBrand","cardLast4","cardExpMonth","cardExpYear"],"mappings":"oHACAA,EAAOC,QAAU,CAAC,kBAAoB,uCAAuC,qBAAuB,0CAA0C,wBAA0B,6CAA6C,KAAO,0BAA0B,WAAa,gCAAgC,YAAc,iCAAiC,oBAAsB,yCAAyC,cAAgB,qC,gCCDja,qHAsDMC,EAAWC,wBAAa,SAAAC,GAC5B,IAAMC,EAAQC,qBAAWC,KAkBnBC,EAAe,SAAAC,GACnBJ,EAAMK,IAAID,EAAME,OAAOC,GAAIH,EAAME,OAAOE,QAG1C,OACE,0BAAMC,SAtBa,SAAAL,GACnBA,EAAMM,iBACFX,EAAMY,OACRZ,EAAMY,OAAOC,cAAcC,MAAK,SAAAC,GAAO,OACrCd,EAAMe,qBAAqBD,GAASD,MAAK,WACvCb,EAAMK,IAAI,kBAAmBW,YAAKhB,EAAMiB,uBAI5CC,QAAQC,IAAI,kCAcZ,+CACA,yBAAKC,UAAU,cACb,yBAAKA,UAAU,SACb,uBAAGA,UAAU,WACX,2BACEA,UAAW,SAAWC,aACtBC,KAAK,OACLf,GAAG,YACHgB,YAAY,aACZC,SAAUrB,MAIhB,yBAAKiB,UAAU,SACb,uBAAGA,UAAU,WACX,2BACEA,UAAW,SAAWC,aACtBC,KAAK,OACLf,GAAG,WACHgB,YAAY,YACZC,SAAUrB,OAKlB,yBAAKiB,UAAU,SACb,8CAEE,kBAAC,cAAD,eACEA,UAAWK,wBACO1B,EAAM2B,SA3E3B,CACLC,MAAO,CACLC,KAAM,CACJF,SAAU,OACVG,MAAO,UACPC,gBAAiB,OACjBC,WAAY,MACZC,cAAe,UACfC,WAAY,mBACZ,gBAAiB,CACfJ,MAAO,YAGXK,QAAS,CACPL,MAAO,kBAiET,yBAAKT,UAAU,oBACb,uBAAGA,UAAU,uBACX,4BAAQA,UAAWe,OAAMC,QA9ClB,SAAAhC,GACbA,EAAMM,iBACNV,EAAMK,IAAI,kBAAmBW,YAAKhB,EAAMiB,kBA4CQoB,KAAK,KAA/C,WAIF,uBAAGjB,UAAU,UAAUO,MAAO,CAAEW,UAAW,UACzC,4BAAQlB,UAAU,oBAAoBE,KAAK,UAA3C,gBASGiB,EAAWC,aAAS,SAAAzC,GAC/B,IACMC,EAAQC,qBAAWC,KAKzB,OAAKc,YAAKhB,EAAMiB,gBA8BZ,yBAAKG,UAAWK,uBACd,kBAAC,iBAAD,CAAgBgB,OAAQC,KACtB,kBAAC,WAAD,CAAUC,MA9IX,CACL,CACEC,OAAQ,gEA6IF,kBAAC/C,EAAD,CAAU6B,SAvCH,YAOX1B,EAAM6C,SAASC,YAEf,6BACE,2BAAI9C,EAAM6C,SAASC,YAAYC,MAC/B,2BACG/C,EAAM6C,SAASC,YAAYE,UAD9B,aACmD,IAChDhD,EAAM6C,SAASC,YAAYG,WAE9B,qCACU,IACPjD,EAAM6C,SAASC,aACd9C,EAAM6C,SAASC,YAAYI,aAH/B,IAIIlD,EAAM6C,SAASC,YAAYK,aAG/B,4BAAQ/B,UAAU,OAAOgB,QApBhB,SAAAhC,GACfA,EAAMM,iBACNV,EAAMK,IAAI,kBAAmBW,YAAKhB,EAAMiB,mBAkBlC,gBAOF,6BACE","file":"static/js/29.b69dea4d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"accountPageHeader\":\"AccountInfo_accountPageHeader__3PT-I\",\"accountSectionHeader\":\"AccountInfo_accountSectionHeader__u8Du1\",\"accountSubSectionHeader\":\"AccountInfo_accountSubSectionHeader__rUWSb\",\"Link\":\"AccountInfo_Link__1OAI7\",\"poochInput\":\"AccountInfo_poochInput__1AR4z\",\"poochButton\":\"AccountInfo_poochButton__3soeJ\",\"stripeElementsInput\":\"AccountInfo_stripeElementsInput__21gKf\",\"StripeElement\":\"AccountInfo_StripeElement__1q-TZ\"};","import React, { useContext } from 'react'\nimport { observer } from 'mobx-react'\nimport AccountStore from '../../stores/AccountStore'\nimport { toJS } from 'mobx'\nimport { REACT_APP_STRIPE_KEY } from '../../shop-config'\nimport {\n  CardElement,\n  Elements,\n  StripeProvider,\n  injectStripe,\n} from 'react-stripe-elements'\n\nimport {\n  Link,\n  poochInput,\n  stripeElementsInput,\n} from '../../styles/AccountInfo.module.scss'\n\n/**\n * Edit Card Observes AccountStore\n * Uses Stripe Elements to tokenize the entered card.\n * After Submision the card token is then processed by the `store.updatePaymentBilling`\n * and then the result is returned by `<Notify/>`\n *\n */\nconst createOptionsElements = () => {\n  return [\n    {\n      cssSrc: 'https://fonts.googleapis.com/css?family=Rubik&display=swap',\n    },\n  ]\n}\n\nconst createOptions = (fontSize, padding) => {\n  return {\n    style: {\n      base: {\n        fontSize: '14px',\n        color: '#495057',\n        backgroundColor: '#fff',\n        fontWeight: '400',\n        letterSpacing: '0.025em',\n        fontFamily: 'Rubik, san-serif',\n        '::placeholder': {\n          color: '#aab7c4',\n        },\n      },\n      invalid: {\n        color: '#9e2146',\n      },\n    },\n  }\n}\n\nconst CardForm = injectStripe(props => {\n  const store = useContext(AccountStore)\n  const handleSubmit = event => {\n    event.preventDefault()\n    if (props.stripe) {\n      props.stripe.createToken().then(payload =>\n        store.updatePaymentBilling(payload).then(() => {\n          store.set('renderCardForm', !toJS(store.renderCardForm))\n        })\n      )\n    } else {\n      console.log(\"Stripe.js hasn't loaded yet.\")\n    }\n  }\n\n  const cancel = event => {\n    event.preventDefault()\n    store.set('renderCardForm', !toJS(store.renderCardForm))\n  }\n  const handleChange = event => {\n    store.set(event.target.id, event.target.value)\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <label>Name on Card</label>\n      <div className=\"field-body\">\n        <div className=\"field\">\n          <p className=\"control\">\n            <input\n              className={'input ' + poochInput}\n              type=\"text\"\n              id=\"firstName\"\n              placeholder=\"First Name\"\n              onChange={handleChange}\n            />\n          </p>\n        </div>\n        <div className=\"field\">\n          <p className=\"control\">\n            <input\n              className={'input ' + poochInput}\n              type=\"text\"\n              id=\"lastName\"\n              placeholder=\"Last Name\"\n              onChange={handleChange}\n            />\n          </p>\n        </div>\n      </div>\n      <div className=\"field\">\n        <label>\n          Card Details\n          <CardElement\n            className={stripeElementsInput}\n            {...createOptions(props.fontSize)}\n          />\n        </label>\n      </div>\n      <div className=\"field is-grouped\">\n        <p className=\"control is-expanded\">\n          <button className={Link} onClick={cancel} href=\"#\">\n            Cancel\n          </button>\n        </p>\n        <p className=\"control\" style={{ textAlign: 'right' }}>\n          <button className=\"button btn-orange\" type=\"submit\">\n            Update\n          </button>\n        </p>\n      </div>\n    </form>\n  )\n})\n\nexport const EditCard = observer(props => {\n  const fontSize = '14px'\n  const store = useContext(AccountStore)\n  const showForm = event => {\n    event.preventDefault()\n    store.set('renderCardForm', !toJS(store.renderCardForm))\n  }\n  if (!toJS(store.renderCardForm)) {\n    if (store.customer.billingInfo) {\n      return (\n        <div>\n          <p>{store.customer.billingInfo.name}</p>\n          <p>\n            {store.customer.billingInfo.cardBrand} ending in{' '}\n            {store.customer.billingInfo.cardLast4}\n          </p>\n          <p>\n            Expires{' '}\n            {store.customer.billingInfo &&\n              store.customer.billingInfo.cardExpMonth}\n            /{store.customer.billingInfo.cardExpYear}\n          </p>\n\n          <button className=\"a11y\" onClick={showForm}>\n            Update Card\n          </button>\n        </div>\n      )\n    } else {\n      return (\n        <div>\n          <p>No Billing Address</p>\n        </div>\n      )\n    }\n  } else {\n    return (\n      <div className={stripeElementsInput}>\n        <StripeProvider apiKey={REACT_APP_STRIPE_KEY}>\n          <Elements fonts={createOptionsElements()}>\n            <CardForm fontSize={fontSize} />\n          </Elements>\n        </StripeProvider>\n      </div>\n    )\n  }\n})\n"],"sourceRoot":""}